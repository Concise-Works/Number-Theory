\subsection{Chinese Remainder Map Applied to Quadratic Residues}
Revisiting the Chinese Remainder Map (\ref{theo:crt_map}), we show that since 
prime factorizations also follow the Chinese Remainder Theorem schema (a product of pairwise coprime elements),
we can generate a congruence system. Also allowing us to extend such systems to residue classes.
\vfill
\begin{center}
    \textit{Continued on next page...}
\end{center}
\vfill
\begin{Tip}
    The Chinese Remainder Theorem (CRT) is named after its origin in ancient China, where it first appeared in the work of the mathematician \textbf{Sunzi} in the 3rd century AD.
    In his book \textit{Sunzi Suanjing}, he posed a problem involving finding a number that leaves specific remainders when divided by different moduli. Although the method was later formalized in modern mathematics, the name honors its roots in early Chinese mathematical texts.
\end{Tip}

\newpage
\begin{theo}[Chinese Remainder Map of Prime Factorizations]

    \label{theo:crt_res_map}

    Let $n\in\mathbb{Z}^+:2\nmid n$ and $n>1$ be a product of pairwise coprime elements,
    \[n = p_1^{e_1}p_2^{e_2}\cdots p_k^{e_k},\]
    We map our factorization via CRT $\theta:=\Z_n\to\Z_{p_1^{e_1}}\times\cdots\times\Z_{p_k^{e_k}}$. Then 
    we take $\alpha\in\Z_n^*$ as, $\alpha:=[a]_n$ and $\gcd(a,n)=1$, allowing us to construct the map $\theta(\alpha)=\{\alpha_1,...,\alpha_k\}$:
    \begin{align*}
        \theta(\alpha) = \begin{cases}
           \alpha_1 & \text{mod } p_1^{e_1} \\
            \alpha_2 & \text{mod } p_2^{e_2} \\
            \vdots & \vdots \\
            \alpha_k & \text{mod } p_k^{e_k}
        \end{cases}
    \end{align*}
    \noindent
    Which is the system of congruences:
    \begin{align*}
        \alpha &\equiv \alpha_1 \pmod{p_1^{e_1}} \\
        \alpha &\equiv \alpha_2 \pmod{p_2^{e_2}} \\
        &\hspace*{.5em}\vdots \\
        \alpha &\equiv \alpha_k \pmod{p_k^{e_k}}
    \end{align*}
    \noindent
    Meaning if we have some $\beta\in\Z_n^*: \alpha=\beta^2$, if $\theta(\beta)=\{\beta_1,...,\beta_k\}$, then:
    \[
        (\alpha_1,...,\alpha_k) = \theta(\alpha) = \theta(\beta^2) = \theta(\beta)^2 = (\beta_1^2,...,\beta_k^2)
    \]
    \noindent
    Then $\alpha_i = \beta_i^2$ for each $i=1,...,k$. Suppose we began $\alpha_i=\beta_i^2$, for some $\beta_i\in\mathbb{Z}_{p_i^{e_i}}$.
    Then $(\beta_1,\dots,\beta_k)$ is $\theta(\beta)^{-1}$. Then,
    \[ 
        (\beta_1,...,\beta_k)^2 = \theta(\beta^2) = (\beta_1^2,...,\beta_k^2) = (\alpha_1,...,\alpha_k) = \theta(\alpha)
    \]
    \noindent
    Revealing for each $i=1,...,k$: \Large
     \[\alpha\in(\mathbb{Z}_n^*)^2\Longleftrightarrow\alpha_i\in(\mathbb{Z}_{p_i^{e_i}}^*)^2\]
    \normalsize
    Restricting $\theta$ to $(\mathbb{Z}_n^*)^2$, we get $\theta:(\mathbb{Z}_n^*)^2\to(\mathbb{Z}_{p_1^{e_1}}^*)^2\times\cdots\times(\mathbb{Z}_{p_k^{e_k}}^*)^2$. Then if $\alpha\in\mathbb{Z}_n^*$, there is some 
    tuple $\{\alpha_1,...,\alpha_k\}$ that it maps to, and vise versa, showing a bijection. Leaving us with:
    \LARGE
    \[
    |(\mathbb{Z}_n^*)^2| = \prod_{i=1}^{k} \left(\varphi(p_i^{e_i})/2 \right) = \varphi(n)/2^k
    \]
    \normalsize
    By theorems (\ref{theo:cardinality_peres}) and (\ref{theo:chinese_remainder_phi}).
\end{theo}
\newpage
\noindent
From the above theorem, we relate back to theorem (\ref{theo:square_roots_2}).
\begin{theo}[Number of Square Roots CRT]

    Let $n\in\mathbb{Z}^+:2\nmid n$ and $n>1$ be a product of pairwise coprime elements, and $\alpha\in\mathbb{Z}_n^*$, where $\alpha = \beta^2$ for some $\beta\in\mathbb{Z}_n^*$ and $\theta(\beta)=\{\beta_1,...,\beta_k\}$.\\
    
    \noindent
    Then for some $\gamma\in\mathbb{Z}_n^*$, with $\theta(\gamma)=\{\gamma_1,...,\gamma_k\}$, consider:
    \begin{align*}
        \gamma^2 = \beta^2 &\iff \theta(\gamma^2) = \theta(\beta^2) \\
        &\iff (\gamma_1^2, \dots, \gamma_r^2) = (\beta_1^2, \dots, \beta_r^2) \\
        &\iff (\gamma_1, \dots, \gamma_r) = (\pm \beta_1, \dots, \pm \beta_r).
        \end{align*}
    \noindent
    Therefore $\alpha$ has $2^k$ square roots, $\theta^{-1}(\pm\beta_1,...,\pm\beta_k)$.

\end{theo}

\subsection {Square roots of $-1$ modulo $p$}

\begin{theo}[Primes are Congruent to $1$ or $3$ modulo $4$]


    \label{theo:primes_1_3}

    Let $p$ be an odd prime. \underline{Then $p\equiv 1\pmod{4}$ or $p\equiv 3\pmod{4}$,} as $p\not\equiv 0\pmod{4}$ (divisible by 4) and $p\not\equiv 2\pmod{4}$ (even but not divisible by 4).
\end{theo}

\begin{theo}[Quadratic Residue $-1$ test (mod $4$)]

    Let $p$ be an odd prime. Then, $\left(\frac{-1}{p}\right)=1\Longleftrightarrow p\equiv 1\pmod{4}$.\\
    I.e., $-1$ is a quadratic residue modulo $p$ if and only if $p$ is congruent to $1$ modulo $4$.
\end{theo}
\begin{Proof}[Quadratic Residue $-1$ test (mod $4$)]

    \label{theo:quadratic_residue_4}
    
    By Euler's criterion $\left(\frac{-1}{p}\right)=1\Longleftrightarrow(-1)^{(p-1)/2}\equiv 1\pmod*{p}$.
    
    \begin{itemize}
        \item If $p\equiv 1\pmod{4}$. Then, $p=4k+1$ for some $k\in\mathbb{Z}$. Taking $1$ from both sides and dividing $2$ yields, $(p-1)/2=2k$.
        Therefore, $(p-1)/2$ is even, thus $(-1)^{(p-1)/2}=1$, as -1 raised to an even power is $1$.
        \item If $p\equiv 3\pmod*{4}$, then $p=4k+3$ for some $k\in\mathbb{Z}$. Then $(p-1)/2=2k+1$ is odd, and $(-1)^{(p-1)/2}=-1$.

    \end{itemize}
     
\end{Proof}

\newpage

\begin{theo}[Quadratic non-residue $-1$ test (mod $4$)]

    Let \( p \) be a prime with \( p \equiv 1 \pmod{4} \), \( \gamma \in \mathbb{Z}_p^* \setminus (\mathbb{Z}_p^*)^2 \), and \( \beta := \gamma^{(p-1)/4} \). Then \( \beta^2 = -1 \).

\end{theo}
\begin{Proof}[Quadratic non-residue $-1$ test (mod $4$)]

    Since \( p \equiv 1 \pmod{4} \), we have \( p = 4k + 1 \) for some \( k \in \mathbb{Z} \). Then \( (p-1)/4 = k \) is an integer.
    Therefore, \( \gamma^{(p-1)/4} = \beta \) is well-defined (\ref{theo:crt_res_map}). Since $\gamma$ is a non-square, then $\left(\frac{\gamma}{p}\right)=-1$, as we see by Euler's criterion:
   \Large \[ \beta^2 = \gamma^{(p-1)/2} = -1 \]
   \normalsize
\end{Proof}

\begin{theo}[Thue's Lemma]

    \label{theo:thue}

    Let \( n, b, r^*, t^* \in \mathbb{Z} \), with \( 0 < r^* \leq n < r^*t^* \). Then there exist \( r, t \in \mathbb{Z} \) with
\[
r \equiv bt \pmod{n}, \quad 0<|r| < r^*, \quad \text{and} \quad 0 < |t| < t^*.
\]
\noindent
Meaning, $r-bt=nk:k\in\Z$, where $r$ and $bt$ differ by some multiple $n$. Such multiple could be enormous in magnitude. Thus we bound solutions $r$ and $t$ by $r^*$ and $t^*$ respectively.
\end{theo}
\noindent
We use this next theorem to prove Thue's Lemma.
\begin{theo}[Pigeon Hole Principle]

    Let \( n, m \in \mathbb{Z}^+ \) with \( n < m \). Then if we distribute \( m \) pigeons into \( n \) pigeonholes, there must be at least one pigeonhole with more than one pigeon.
\end{theo}
\vspace{1em}
\begin{Tip}
    The principle dates back to the 1830s when it was first introduced by German mathematician Peter Gustav Lejeune Dirichlet. It was originally called Dirichlet's box principle. Over time, the term “pigeonhole” became more common, referring to the analogy of pigeons and their nesting holes.
\end{Tip}

\newpage
\begin{Proof}[Thue's Lemma]

    

    For $\{r_i\}_{i=0}^{r^*-1}$ and $\{t_i\}_{i=1}^{t^*-1}$, we have $n_{ij}^*:=i-bj$.
    Since $r^*t^* > n$, then by the Pigeon Hole Principle, there must be a pigeon hole (residue) with more than one pigeon (representative) as $r^*t^*$ overlaps $n$.
    Therefore, for some $(i_1,j_1)\neq(i_2,j_2)$, we have $n_{i_1j_1}^*=n_{i_2j_2}^*$. We define $r:=i_1-i_2$ and $t:=j_2-j_1$, then
    \begin{align*}
        i_1-bj_1&\equiv i_2-bj_2\pmod{n}\\
        i_1-i_2&\equiv b(j_2-j_1)\pmod{n}\\
        r&\equiv bt\pmod{n}
    \end{align*}
    \noindent
    Satisfying $|r|<r^*$, and $|t|<t^*$. Additionally $t\neq 0$ as that implies $r\equiv 0\pmod{n}$, which contradicts $0<|r|$ and $0<|t|$.
\end{Proof}
\begin{theo}[Fermat's Two Square Theorem]

    Let $p$ be an odd prime. Then $p=r^2+t^2$ for some $r,t\in\mathbb{Z}$ if and only if $p\equiv 1\pmod{4}$.
\end{theo}
\begin{Proof}[Fermat's Two Square Theorem]

    \textbf{Proving} $p=r^2+t^2\implies p\equiv 1\pmod*{4}$:\\
    \noindent
    The square of any integer modulo 4 is:
  
    \[
        0^2\equiv 0\pmod*{4};\enspace
        1^2\equiv 1\pmod*{4};\enspace
        2^2\equiv 0\pmod*{4};\enspace
        3^2\equiv 1\pmod*{4};
        \]
    \noindent
    Our squares are either $0$ or $1$ modulo $4$. Therefore, their possible sums are $0,1,2$ modulo $4$, never $3$.
    Therefore $p\equiv 3\pmod*{4}$ cannot be written as the sum of two squares.\\

    \noindent
    \textbf{Proving} $p\equiv 1\pmod*{4}\implies p=r^2+t^2$:\\
    We know $p\equiv 1\pmod*{4}$, then $b^2\equiv -1\pmod{p}$ for some $b\in\mathbb{Z}_p^*$ (\ref{theo:quadratic_residue_4}).
    We apply Thue's Lemma (\ref{theo:thue}): we define $n:=p$ and $r^*:=t^*:=\floor{\sqrt{p}}+1$, where $\sqrt{p}\notin\Z$ and $\floor{\sqrt{p}}<\sqrt{p}$.
    This ensures $p<r^*t^*$. 
    Then $r^*<p$ ($\leq$ if we included 2). Thus satisfying $0<r^*<p<r^*t^*$. Therefore, there exists $r,t\in\mathbb{Z}$,
    \[r\equiv bt\pmod{p},\quad 0<|r|\leq\floor{\sqrt{p}}<\sqrt{p},\quad 0<|t|\leq\floor{\sqrt{p}}<\sqrt{p}\]
    \noindent
    Then, $r^2\equiv b^2t^2\pmod{p}$, substituting $b^2\equiv -1\pmod{p}$, yields $r^2\equiv -t^2\pmod{p}$. Therefore, $r^2+t^2\equiv 0\pmod{p}$, and $r^2+t^2=pk:k\in\Z$. Since $r^2+t^2<p(2)$, then $k=1$. Thus,\\
    resulting in $p=r^2+t^2$.
\end{Proof}

\newpage

\begin{theo}[Infinitely Many Primes $p\equiv 1\pmod{4}$]

    There are infinitely many primes $p\equiv 1\pmod{4}$.
\end{theo}

\begin{Proof}[Infinitely Many Primes $p\equiv 1\pmod{4}$]

    Suppose there are finitely many primes $p_1,...,p_k\equiv 1\pmod{4}$, then all such primes are odd.
    Let $M:=\prod_{i=1}^{k}p_i$. Then $M\equiv 1\pmod{4}$, and $M = 4n+1$ for some arbitrary $n\in\mathbb{Z}$. 
    We choose $N:=4M^2+1$, as:
    \[M^2=\left(\prod_{i=1}^{k}p_i\right)^2=\prod_{i=1}^{k}p_i^2\]
    \noindent
    Therefore, there are no $p_i$ factors among $M^2$ or $N$, yielding a prime $p\notin\{p_1,...,p_k\}$. Then,
    \begin{align*}
        N\equiv 0\pmod*{p}&\quad \text{(Given.)}\\
        4M^2+1\equiv 0\pmod*{p} &\quad \text{(Substitute.)}\\
        4M^2\equiv -1\pmod*{p}&\quad \text{(Subtract 1.)}\\
        (2M)^2\equiv -1\pmod*{p} &\quad \text{(Factor.)}
    \end{align*}
    Then $-1$ is also a quadratic residue modulo $p$, contradicting $p_1,...,p_k$ to be only such primes.

\end{Proof}

\begin{theo}[Infinitely Many Primes $p\equiv 3\pmod{4}$]

    There are infinitely many primes $p\equiv 3\pmod{4}$.
\end{theo}

\begin{Proof}[Infinitely Many Primes $p\equiv 3\pmod{4}$]

    Suppose there are finitely many primes $p_1, \dots, p_k \equiv 3\equiv-1 \pmod{4}$. 
    Let \( M := \prod_{i=1}^{k} p_i \), which is $M=4n-1: n \in \mathbb{Z}$.
    We choose \( N := 4M - 1 \). Since \( N \equiv 3 \pmod{4} \), then $N\equiv 0 \pmod*{p}$ for some prime  (\ref{theo:primes_1_3}).
    Suppose $p\in\{p_1, \dots, p_k\}$. Then, \( p \) must divide both \( N \) and \( 4M \), which implies \( p \) divides \( 4M - N = 1 \). However, no prime can divide 1. Thus contradicting $p_1, \dots, p_k$ to be the only such primes. 

\end{Proof}



